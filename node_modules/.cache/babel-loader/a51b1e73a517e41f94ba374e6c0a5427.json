{"ast":null,"code":"import _toConsumableArray from \"/home/laur/Desktop/REACT/PROJECTudemy/18-lifecycle-exercise/deck-of-cards-solution/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"/home/laur/Desktop/REACT/PROJECTudemy/18-lifecycle-exercise/deck-of-cards-solution/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _objectSpread from \"/home/laur/Desktop/REACT/PROJECTudemy/18-lifecycle-exercise/deck-of-cards-solution/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _asyncToGenerator from \"/home/laur/Desktop/REACT/PROJECTudemy/18-lifecycle-exercise/deck-of-cards-solution/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/laur/Desktop/REACT/PROJECTudemy/18-lifecycle-exercise/deck-of-cards-solution/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/laur/Desktop/REACT/PROJECTudemy/18-lifecycle-exercise/deck-of-cards-solution/src/Deck.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Card from \"./Card\";\nimport \"./Deck.css\";\nimport axios from \"axios\";\nvar API_BASE_URL = \"https://www.deckofcardsapi.com/api/deck\";\n\nfunction Deck(props) {\n  var _useState = useState({\n    deck: null,\n    drawn: []\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1]; // async componentDidMount() {\n  //   let deck = await axios.get(`${API_BASE_URL}/new/shuffle/`);\n  //   setState({ deck: deck.data });\n  // }\n\n\n  useEffect(function () {\n    function getData() {\n      return _getData.apply(this, arguments);\n    }\n\n    function _getData() {\n      _getData = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var deck;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return axios.get(\"\".concat(API_BASE_URL, \"/new/shuffle/\"));\n\n              case 2:\n                deck = _context.sent;\n                setState(_objectSpread({\n                  deck: deck.data\n                }, state.drawn));\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      return _getData.apply(this, arguments);\n    }\n\n    getData();\n  }, []);\n\n  function getCard() {\n    return _getCard.apply(this, arguments);\n  }\n\n  function _getCard() {\n    _getCard = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      var deck_id, cardUrl, cardRes, card;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              deck_id = state.deck.deck_id;\n              _context2.prev = 1;\n              cardUrl = \"\".concat(API_BASE_URL, \"/\").concat(deck_id, \"/draw/\");\n              _context2.next = 5;\n              return axios.get(cardUrl);\n\n            case 5:\n              cardRes = _context2.sent;\n\n              if (cardRes.data.success) {\n                _context2.next = 8;\n                break;\n              }\n\n              throw new Error(\"No card remaining!\");\n\n            case 8:\n              card = cardRes.data.cards[0];\n              console.log(cardRes.data);\n              setState(function (st) {\n                return _objectSpread({}, st.deck, {\n                  drawn: [].concat(_toConsumableArray(st.drawn), [{\n                    id: card.code,\n                    image: card.image,\n                    name: \"\".concat(card.value, \" of \").concat(card.suit)\n                  }])\n                });\n              });\n              _context2.next = 16;\n              break;\n\n            case 13:\n              _context2.prev = 13;\n              _context2.t0 = _context2[\"catch\"](1);\n              alert(_context2.t0);\n\n            case 16:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 13]]);\n    }));\n    return _getCard.apply(this, arguments);\n  }\n\n  var cards = state.drawn.map(function (c) {\n    return React.createElement(Card, {\n      key: c.id,\n      name: c.name,\n      image: c.image,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    });\n  });\n  return React.createElement(\"div\", {\n    className: \"Deck\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    className: \"Deck-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, \"\\u2666 Card Dealer \\u2666\"), React.createElement(\"h2\", {\n    className: \"Deck-title subtitle\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, \"\\u2666 A little demo made with React \\u2666\"), React.createElement(\"button\", {\n    className: \"Deck-btn\",\n    onClick: getCard,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, \"Get Card!\"), React.createElement(\"div\", {\n    className: \"Deck-cardarea\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, cards));\n}\n\nexport default Deck;","map":{"version":3,"sources":["/home/laur/Desktop/REACT/PROJECTudemy/18-lifecycle-exercise/deck-of-cards-solution/src/Deck.js"],"names":["React","useState","useEffect","Card","axios","API_BASE_URL","Deck","props","deck","drawn","state","setState","getData","get","data","getCard","deck_id","cardUrl","cardRes","success","Error","card","cards","console","log","st","id","code","image","name","value","suit","alert","map","c"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Card from \"./Card\";\nimport \"./Deck.css\";\nimport axios from \"axios\";\nconst API_BASE_URL = \"https://www.deckofcardsapi.com/api/deck\";\n\nfunction Deck(props){\n \n   const [state, setState] = useState({ deck: null, drawn: [] })\n  \n  // async componentDidMount() {\n  //   let deck = await axios.get(`${API_BASE_URL}/new/shuffle/`);\n  //   setState({ deck: deck.data });\n  // }\n\n  useEffect(()=>{\n    async function getData(){\n      let deck = await axios.get(`${API_BASE_URL}/new/shuffle/`);\n      setState({ deck: deck.data, ...state.drawn });\n    }\n    getData();\n  },[])\n\n  async function getCard() {\n    let deck_id = state.deck.deck_id;\n    try {\n      let cardUrl = `${API_BASE_URL}/${deck_id}/draw/`;\n      let cardRes = await axios.get(cardUrl);\n      if (!cardRes.data.success) {\n        throw new Error(\"No card remaining!\");\n      }\n      let card = cardRes.data.cards[0];\n      console.log(cardRes.data);\n      setState(st => ({\n        ...st.deck,\n        drawn: [\n          ...st.drawn,\n          {\n            id: card.code,\n            image: card.image,\n            name: `${card.value} of ${card.suit}`\n          }\n        ]\n      }));\n    } catch (err) {\n      alert(err);\n    }\n  }\n\n \n    const cards = state.drawn.map(c => (\n      <Card key={c.id} name={c.name} image={c.image} />\n    ));\n    return (\n      <div className='Deck'>\n        <h1 className='Deck-title'>♦ Card Dealer ♦</h1>\n        <h2 className='Deck-title subtitle'>\n          ♦ A little demo made with React ♦\n        </h2>\n        <button className='Deck-btn' onClick={getCard}>\n          Get Card!\n        </button>\n        <div className='Deck-cardarea'>{cards}</div>\n      </div>\n    );\n  \n}\nexport default Deck;\n"]},"metadata":{},"sourceType":"module"}